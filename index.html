<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dropdown menu using the HTML details element and anchor positioning">
    <title>Details Dropdown Menu</title>
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
    <link rel="manifest" href="./site.webmanifest">
    <link rel="stylesheet" href="./style.css">
    <script src="./index.js" type="module"></script>
</head>

<body>
    <div id="loader" class="loader"><span class="visually-hidden">The page is loading...</span></div>
    <span class="visually-hidden" aria-live="polite" aria-hidden="true" id="page-loaded"></span>
    <a href="#main-content" class="element-invisible element-focusable skip-link">Skip to main content</a>

    <div class="theme-toggler">
        <p class="light">Light<span class="visually-hidden"> theme inactive</span></p><button type="button"
            aria-pressed="true" aria-label="Toggle theme"><span></span></button>
        <p class="dark">Dark<span class="visually-hidden"> theme active</span></p>
    </div>

    <header class="header">
        <p class="h1">
            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 32 32" aria-hidden="true">
                <path d="M26,6V2H2V12h9V30H30V6ZM4,10V4H24V6H11v4ZM28,28H13V8H28Z" />
                <rect x="15" y="11" width="2" height="2" />
                <rect x="19" y="11" width="7" height="2" />
                <rect x="15" y="17" width="2" height="2" />
                <rect x="19" y="17" width="7" height="2" />
                <rect x="15" y="23" width="2" height="2" />
                <rect x="19" y="23" width="7" height="2" />
                <rect width="32" height="32" class="rect-large" />
            </svg>
            <span>Details Dropdown Menu</span>
        </p>

        <!-- Primary Navigation -->
        <div id="primary-navigation" class="primary-navigation">
            <div class="hamburger-button-wrapper">
                <p>Menu</p>
                <button class="hamburger-button" id="hamburger-button" aria-controls="site-navigation"
                    aria-expanded="false">
                    <span id="btn-txt" class="visually-hidden">Expand menu</span>
                    <svg class="lines" viewBox="0 0 100 100">
                        <rect class="line top" y="28" x="10" rx="5" width="8" height="10"></rect>
                        <rect class="line middle" y="47" x="10" rx="5" width="8" height="10"></rect>
                        <rect class="line bottom" y="68" x="10" rx="5" width="8" height="10"></rect>
                    </svg>
                </button>
            </div>
            <nav id="site-navigation" class="menu-hidden" aria-label="Main navigation">
                <div class="nav-items-wrapper container">
                    <a href="/" aria-current="page" class="nav-item">Home</a>

                    <details class="target-one nav-item" data-group="details-nav">
                        <summary class="anchor-one">Projects</summary>
                        <ul>
                            <li><a href="#">Project #1</a></li>
                            <li><a href="#">Project #2</a></li>
                            <li><a href="#">Project #3</a></li>
                            <li><a href="#">Project #4</a></li>
                            <li><a href="#">Project #5</a></li>
                        </ul>
                    </details>

                    <details class="target-two nav-item" data-group="details-nav">
                        <summary class="anchor-two">Case studies</summary>
                        <ul>
                            <li><a href="#">Case study #1</a></li>
                            <li><a href="#">Case study #2</a></li>
                            <li><a href="#">Case study #3</a></li>
                            <li><a href="#">Case study #4</a></li>
                            <li><a href="#">Case study #5</a></li>
                            <li><a href="#">Case study #6</a></li>
                            <li><a href="#">Case study #7</a></li>
                        </ul>
                    </details>

                    <a href="#" class="nav-item">About</a>

                    <a href="#" class="nav-item">Contact</a>


                </div>
            </nav>
        </div>
        <!-- END Primary Navigation -->
    </header>

    <main class="main container" id="main-content">

        <h1>Home</h1>
        <ul class="details-container">
            <li class="element">
                <details data-group="details-main" open>
                    <summary>Description</summary>
                    <div class="flow details-content">
                        <p>A lightweight, accessible navigation and content system built using the native HTML
                            <code>&lt;details&gt;</code> and
                            <code>&lt;summary&gt;</code> elements.
                        </p>
                        <p>Enhances the default behavior with JavaScript for
                            better usability,
                            keyboard support, and ARIA state management â€” without relying on external libraries.
                        </p>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>Features</summary>
                    <div class="flow details-content">
                        <ul>
                            <li>Native <code>&lt;details&gt;</code> used for dropdown menus in navigation and content.
                            </li>
                            <li>Automatic closing of <code>&lt;details&gt;</code> when clicking outside a navigation
                                area.
                            </li>
                            <li>Keyboard support: pressing <code>Escape</code> closes the currently focused
                                <code>&lt;details&gt;</code>.
                            </li>
                            <li>ARIA attributes (<code>aria-expanded</code>) synchronized with open/close state.</li>
                            <li>Implements grouped accordion behavior using the <code>data-group</code> attribute: when
                                one <code>&lt;details&gt;</code> in a group opens, any others in the same group
                                automatically close.</li>

                            <li>Responsive hamburger menu with accessible ARIA controls.</li>
                            <li>Modern <strong>CSS Anchor Positioning</strong> used for aligning dropdown menus.</li>
                        </ul>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>JavaScript</summary>
                    <div class="flow details-content">
                        <ul>
                            <li><code>details.js</code>: Handles <code>&lt;details&gt;</code> accessibility and
                                behavior.<ul>
                                    <li>Syncs <code>aria-expanded</code> between <code>&lt;summary&gt;</code> and
                                        <code>&lt;details&gt;</code>.
                                    </li>
                                    <li>Closes dropdowns when clicking outside navigation.</li>
                                    <li>Implements grouped accordion behavior using the <code>data-group</code>
                                        attribute: when
                                        one <code>&lt;details&gt;</code> in a group opens, any others in the same group
                                        automatically close.</li>
                                    <li>Supports closing via the <code>Escape</code> key and restores focus.</li>
                                </ul>
                            </li>
                            <li><code>hamburger-button.js</code>: Toggles the mobile navigation menu.<ul>
                                    <li>Updates <code>aria-expanded</code> on the button.</li>
                                    <li>Switches between hidden/visible menu states.</li>
                                    <li>Updates the visually hidden text for screen readers.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>CSS</summary>
                    <div class="flow details-content">
                        <ul>
                            <li>
                                <p><strong>Anchor Positioning</strong> (<code>position-anchor</code>) is used to align
                                    dropdown menus relative
                                    to their <code>&lt;summary&gt;</code>.</p>
                                <ul>
                                    <li>In browsers without Anchor Positioning support (e.g., Firefox), the layout
                                        gracefully falls back to a
                                        standard flow layout, preserving an unbroken user experience.</li>
                                </ul>
                            </li>
                            <li>
                                <p>Uses <strong>media query range syntax</strong> for responsive breakpoints.</p>
                            </li>
                            <li>Mobile-first design, with progressive enhancements for larger viewports.</li>
                            <li>Dropdown menus adapt to available space without JavaScript intervention.</li>
                            <li>WCAG AAA color contrast is maintained for light and dark themes.</li>
                            <li>CSS custom properties are used for easy theming.</li>
                        </ul>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>Accessibility</summary>
                    <div class="flow details-content">
                        <ul>
                            <li>ARIA attributes (<code>aria-expanded</code>) dynamically updated on all
                                <code>&lt;summary&gt;</code> elements.
                            </li>
                            <li>Escape key support: closes the open <code>&lt;details&gt;</code> and returns focus to
                                its
                                <code>&lt;summary&gt;</code>.
                            </li>
                            <li>Clicking outside a <code>&lt;nav&gt;</code> closes only its dropdown menus.</li>
                            <li>Mobile hamburger menu includes <code>aria-controls</code> and <code>aria-expanded</code>
                                for screen reader
                                support.</li>
                            <li>Semantic HTML structure (<code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>,
                                <code>&lt;main&gt;</code>,
                                <code>&lt;details&gt;</code>, <code>&lt;summary&gt;</code>) aids navigation for
                                assistive technologies.
                            </li>
                        </ul>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary><b>Caniuse</b> anchor positioning?</summary>
                    <div class="flow details-content">
                        <p>As of September 2025, <b>Caniuse</b> reports that the following browsers/platforms support
                            anchor
                            positioning:</p>
                        <ul>
                            <li>Chrome v.140</li>
                            <li>Edge v.140 </li>
                            <li>Opera v.122</li>
                            <li>Chrome for Android v.139</li>
                            <li>Safari on IOS v.26</li>
                            <li>Android Browser v.139</li>
                        </ul>
                        <p><b>Caniuse</b> reports that "All major browser engines are working on implementing this
                            spec.".</p>
                        <p>
                            <a href="https://caniuse.com/css-anchor-positioning" target="_blank"
                                rel="noopener noreferrer" class="nav-item">Caniuse: anchor positioning</a>
                        </p>
                        <p><strong>Note</strong>: unsupported browsers/platforms will display the default
                            <code>details</code> behaviour.
                        </p>
                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>Testing and Compatibility</summary>
                    <div class="flow details-content">
                        <p>The application has been tested on the following platforms and browsers:</p>
                        <ul>
                            <li><strong>Operating System</strong>: Windows 10</li>
                            <li><strong>Browsers</strong>:<ul>
                                    <li>Google Chrome (full support, including Anchor Positioning)</li>
                                    <li>Mozilla Firefox (no Anchor Positioning support yet, but layout gracefully falls
                                        back to default
                                        <code>&lt;details&gt;</code> behavior)
                                    </li>
                                    <li>Microsoft Edge (full support, including Anchor Positioning)</li>
                                </ul>
                            </li>
                        </ul>
                        <h2>Device View Testing</h2>
                        <p>The layout and functionality have been verified in both browser and device simulation views
                            to ensure responsiveness
                            and usability.</p>

                    </div>
                </details>
            </li>
            <li class="element">
                <details data-group="details-main">
                    <summary>Code source</summary>
                    <div class="flow details-content">
                        <p>The anchor positioning code for the main navigation comes from a <b>Codepen</b> by <a
                                href="https://codepen.io/mrtrimble" target="_blank" rel="noopener noreferrer">Ryan
                                Trimble</a>. My only changes were:</p>
                        <ul>
                            <li>Changing IDs to classes</li>
                            <li>Adding <code>position-try-fallbacks: flip-block, flip-inline</code> to the target's
                                <code>::details-content</code>
                            </li>
                            <li>Making both targets <code>position-area: block-end center</code></li>
                        </ul>
                        <p>
                            <a href="https://codepen.io/mrtrimble/pen/ZYzzqOJ/676e5968b2726fb2c3383819ffb8d15b"
                                target="_blank" rel="noopener noreferrer" class="nav-item">View CodePen</a>
                        </p>
                    </div>
                </details>
            </li>
        </ul>
    </main>

    <footer class="footer">
        <a href="https://github.com/chrisnajman/details-dropdown-menu" target="_blank" rel="noopener noreferrer">
            GitHub Repository
        </a>
    </footer>

</body>

</html>